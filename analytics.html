<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="icon" type="image/png" href="images/trees/sakura.png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FocusGrow - Statistics</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <span class="nav-logo"><i class="fas fa-seedling"></i></span>
                <span class="nav-title">FocusGrow</span>
            </div>
            <div class="nav-menu">
                <a href="dashboard.html" class="nav-link">
                    <i class="fas fa-clock"></i>
                    <span>Timer</span>
                </a>
                <a href="analytics.html" class="nav-link active">
                    <i class="fas fa-chart-line"></i>
                    <span>Stats</span>
                </a>
                <a href="garden.html" class="nav-link">
                    <i class="fas fa-tree"></i>
                    <span>Garden</span>
                </a>
                <a href="settings.html" class="nav-link">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                </a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container">
        <div class="page-header">
            <h1><i class="fas fa-chart-line"></i> Statistics</h1>
            <p>Track your progress and visualize your study patterns</p>
        </div>

        <!-- Quick Stats - Original Layout Style -->
        <div class="stats-grid" style="margin-bottom: 30px;">
            <div class="stat-card">
                <div class="stat-icon" style="background: linear-gradient(135deg, #87CEEB, #4ade80);">
                    <i class="fas fa-clock"></i>
                </div>
                <div class="stat-info">
                    <div class="stat-label">Total Study Time</div>
                    <div class="stat-value" id="totalTimeAnalytics">0h</div>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon" style="background: linear-gradient(135deg, #4ade80, #22c55e);">
                    <i class="fas fa-bullseye"></i>
                </div>
                <div class="stat-info">
                    <div class="stat-label">Sessions Completed</div>
                    <div class="stat-value" id="sessionsCompleted">0</div>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon" style="background: linear-gradient(135deg, #f97316, #ea580c);">
                    <i class="fas fa-fire"></i>
                </div>
                <div class="stat-info">
                    <div class="stat-label">Study Streak</div>
                    <div class="stat-value" id="studyStreak">0 days</div>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon" style="background: linear-gradient(135deg, #fbbf24, #f59e0b);">
                    <i class="fas fa-chart-line"></i>
                </div>
                <div class="stat-info">
                    <div class="stat-label">Daily Average</div>
                    <div class="stat-value" id="dailyAverage">0m</div>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon" style="background: linear-gradient(135deg, #ec4899, #d946ef);">
                    <i class="fas fa-calendar-check"></i>
                </div>
                <div class="stat-info">
                    <div class="stat-label">Best Day</div>
                    <div class="stat-value" id="bestDay">-</div>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon" style="background: linear-gradient(135deg, #a78bfa, #8b5cf6);">
                    <i class="fas fa-trophy"></i>
                </div>
                <div class="stat-info">
                    <div class="stat-label">Level</div>
                    <div class="stat-value" id="currentLevel">1</div>
                </div>
            </div>
        </div>

        <!-- Time Period Selector -->
        <div style="text-align: center; margin-bottom: 20px;">
            <div class="btn-group" style="display: inline-flex; gap: 10px; background: rgba(255,255,255,0.05); padding: 5px; border-radius: 12px;">
                <button class="period-btn active" data-period="7">Last 7 Days</button>
                <button class="period-btn" data-period="30">Last 30 Days</button>
                <button class="period-btn" data-period="all">All Time</button>
            </div>
        </div>

        <!-- Charts Grid -->
        <div style="display: grid; gap: 20px; margin-bottom: 80px;">
            
            <!-- Daily Progress Chart -->
            <div class="stat-card" style="padding: 25px; display: block;">
                <h3 style="margin: 0 0 20px 0; display: flex; align-items: center; gap: 10px;">
                    <i class="fas fa-chart-line" style="color: #4ade80;"></i>
                    Daily Study Time
                </h3>
                <canvas id="dailyChart" style="max-height: 300px;"></canvas>
            </div>

            <!-- Hourly Distribution -->
            <div class="stat-card" style="padding: 25px; display: block;">
                <h3 style="margin: 0 0 20px 0; display: flex; align-items: center; gap: 10px;">
                    <i class="fas fa-clock" style="color: #87CEEB;"></i>
                    Best Study Hours
                </h3>
                <canvas id="hourlyChart" style="max-height: 300px;"></canvas>
            </div>

            <!-- Weekly Pattern -->
            <div class="stat-card" style="padding: 25px; display: block;">
                <h3 style="margin: 0 0 20px 0; display: flex; align-items: center; gap: 10px;">
                    <i class="fas fa-calendar-week" style="color: #fbbf24;"></i>
                    Weekly Pattern
                </h3>
                <canvas id="weeklyChart" style="max-height: 300px;"></canvas>
            </div>

            <!-- Session Types Distribution -->
            <div class="stat-card" style="padding: 25px; display: block;">
                <h3 style="margin: 0 0 20px 0; display: flex; align-items: center; gap: 10px;">
                    <i class="fas fa-chart-pie" style="color: #a78bfa;"></i>
                    Study vs Break Time
                </h3>
                <canvas id="pieChart" style="max-height: 300px;"></canvas>
            </div>

            <!-- Insights Section -->
            <div class="stat-card" style="padding: 25px; background: linear-gradient(135deg, rgba(135, 206, 235, 0.1), rgba(74, 222, 128, 0.1)); display: block;">
                <h3 style="margin: 0 0 15px 0; display: flex; align-items: center; gap: 10px;">
                    <i class="fas fa-lightbulb" style="color: #fbbf24;"></i>
                    Insights & Recommendations
                </h3>
                <div id="insightsContainer" style="line-height: 1.8;">
                    <!-- Dynamically generated insights -->
                </div>
            </div>

            <!-- Recent Activity -->
            <div class="stat-card" style="padding: 25px; display: block;">
                <h3 style="margin: 0 0 20px 0; display: flex; align-items: center; gap: 10px;">
                    <i class="fas fa-history" style="color: #87CEEB;"></i>
                    Recent Sessions
                </h3>
                <div id="recentActivityList" style="display: flex; flex-direction: column; gap: 12px;">
                    <!-- Dynamically generated activity -->
                </div>
            </div>
        </div>
    </div>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <a href="dashboard.html" class="bottom-nav-link">
            <i class="fas fa-clock"></i>
            <span class="bottom-nav-label">Timer</span>
        </a>
        <a href="analytics.html" class="bottom-nav-link active">
            <i class="fas fa-chart-line"></i>
            <span class="bottom-nav-label">Stats</span>
        </a>
        <a href="garden.html" class="bottom-nav-link">
            <i class="fas fa-tree"></i>
            <span class="bottom-nav-label">Garden</span>
        </a>
        <a href="settings.html" class="bottom-nav-link">
            <i class="fas fa-cog"></i>
            <span class="bottom-nav-label">Settings</span>
        </a>
    </nav>

    <script src="analytics-page.js"></script>
    <script src="auth.js"></script>

    <style>
        .period-btn {
            padding: 10px 20px;
            border: none;
            background: transparent;
            color: rgba(255,255,255,0.6);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
            font-weight: 500;
        }

        .period-btn:hover {
            color: rgba(255,255,255,0.9);
            background: rgba(255,255,255,0.05);
        }

        .period-btn.active {
            background: linear-gradient(135deg, #4ade80, #22c55e);
            color: white;
        }

        .btn-group {
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        #insightsContainer {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .insight-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 12px;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            border-left: 3px solid;
        }

        .insight-item.success {
            border-left-color: #4ade80;
        }

        .insight-item.warning {
            border-left-color: #fbbf24;
        }

        .insight-item.info {
            border-left-color: #87CEEB;
        }

        .insight-icon {
            font-size: 20px;
            margin-top: 2px;
        }
    </style>
</body>
</html>
